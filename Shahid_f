<label>From Date:</label>
<input type="date" id="from_date">

<label>To Date:</label>
<input type="date" id="to_date">

<script>
    function setupDateFields() {
        const today = new Date();
        const pastDate = new Date();
        pastDate.setDate(today.getDate() - 120);

        const formatDate = date => date.toISOString().split('T')[0];

        const fromDate = document.getElementById('from_date');
        const toDate = document.getElementById('to_date');

        const minDate = formatDate(pastDate);
        const maxDate = formatDate(today);

        // Set limits on both fields
        fromDate.min = toDate.min = minDate;
        fromDate.max = toDate.max = maxDate;

        // When from_date changes
        fromDate.addEventListener('change', function() {
            if (fromDate.value > toDate.value) {
                toDate.value = fromDate.value;
            }
        });

        // When to_date changes
        toDate.addEventListener('change', function() {
            if (toDate.value < fromDate.value) {
                fromDate.value = toDate.value;
            }
        });
    }

    // Call function after DOM is ready
    document.addEventListener('DOMContentLoaded', setupDateFields);
</script>
