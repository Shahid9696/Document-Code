<label>From Date:</label>
<input type="text" id="from_date" placeholder="MM/DD/YYYY">

<label>To Date:</label>
<input type="text" id="to_date" placeholder="MM/DD/YYYY">

<script>
    function setupDateFields() {
        const today = new Date();
        const pastDate = new Date();
        pastDate.setDate(today.getDate() - 120);

        // Helper to parse MM/DD/YYYY to Date
        function parseDate(str) {
            const [month, day, year] = str.split('/');
            return new Date(`${year}-${month}-${day}`);
        }

        // Helper to format Date to MM/DD/YYYY
        function formatDate(date) {
            const month = String(date.getMonth() + 1).padStart(2, '0');
            const day = String(date.getDate()).padStart(2, '0');
            const year = date.getFullYear();
            return `${month}/${day}/${year}`;
        }

        const fromDateInput = document.getElementById('from_date');
        const toDateInput = document.getElementById('to_date');

        // Set default today's date
        fromDateInput.value = formatDate(today);
        toDateInput.value = formatDate(today);

        function validateDates() {
            const fromDate = parseDate(fromDateInput.value);
            const toDate = parseDate(toDateInput.value);

            // Check valid date range (between pastDate and today)
            if (fromDate < pastDate) fromDateInput.value = formatDate(pastDate);
            if (fromDate > today) fromDateInput.value = formatDate(today);

            if (toDate < pastDate) toDateInput.value = formatDate(pastDate);
            if (toDate > today) toDateInput.value = formatDate(today);

            // Ensure from_date <= to_date
            if (fromDate > toDate) {
                toDateInput.value = fromDateInput.value;
            }
        }

        fromDateInput.addEventListener('change', validateDates);
        toDateInput.addEventListener('change', validateDates);
    }

    document.addEventListener('DOMContentLoaded', setupDateFields);
</script>
